<!doctype html>
<html lang="en" data-ng-app="twista" data-ng-controller="MainCtrl" id="twista">
<head>
	<meta charset="UTF-8">
	<title>AMSD &mdash; {{mode}} Siswa</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	{% include 'prepage.html' %}
</head>
<body material-init>
	
	{% if mode == 'Edit' %}
		{% autoescape false %}
<script>
window.siswa = {{siswa|json_encode()}};
</script>
		{% endautoescape %}
	{% endif %}
<script>
	window.tahun = {{tahun}};
</script>
	
	<div class="container shadow-z-2" style="background-color: #fafafa; margin-top: 10px; border-radius: 2px;">
		
		{% include 'header.html' %}
		
		<div class="row">
			<div class="col-sm-12">
				<ol class="breadcrumb" style="margin-top: 15px">
					<li class="bold"><a href="/home">Beranda</a></li>
					<li class="bold"><a href="/siswa">Data Siswa</a></li>
					<li class="active">{{mode}} Siswa</li>
				</ol>
			</div>
		</div>
		<div class="row content">
			<div class="col-sm-12">
				<div class="row">
					<div class="col-md-9">
						<div class="panel panel-default">
							<div class="panel-body" data-ng-controller="SiswaTambahCtrl">
								<!-- tambah: siswa/tambah, edit: siswa/:id -->
								<form action="/siswa/{% if mode == 'Edit' %}{{siswa.siswa.id}}{% else %}tambah{% endif %}" name="formSiswa" method="post" class="form-horizontal" novalidate>
									<fieldset>
										<legend>Data Siswa</legend>
										<input type="hidden" name="id" data-ng-model="siswa.nama">
										<div class="form-group" data-ng-class="{ 'has-error': formSiswa.nama.$invalid && ! formSiswa.nama.$pristine }">
											<label for="nama" class="col-md-3 control-label">Nama Siswa *</label>
											<div class="col-md-5">
												<input type="text" name="nama" id="nama" maxlength="50" data-ng-minlength="3" class="form-control" placeholder="Nama Siswa" data-ng-model="siswa.nama" required>
											</div>
										</div>
										<div class="form-group">
											<label for="kelas" class="col-md-3 control-label">Kelas/Rombel *</label>
											<div class="col-md-3">
												<select name="kelas" id="kelas" class="form-control" data-ng-model="siswa.kelas" required>
													<option value="">-- pilih kelas --</option>
													{% for c in kelas %}
													<option value="{{c.id}}">{{c.nama}}</option>
													{% endfor %}
												</select>
											</div>
										</div>
										<div class="form-group" data-ng-class="{ 'has-error': (formSiswa.nis.$invalid && ! formSiswa.nis.$pristine) || (formSiswa.nisn.$invalid && ! formSiswa.nisn.$pristine) }">
											<label for="nis" class="col-md-3 control-label">NIS *</label>
											<div class="col-md-2">
												<input type="text" name="nis" id="nis" maxlength="10" data-ng-minlength="2" class="form-control" placeholder="NIS" data-ng-model="siswa.nis" masked-input="99?9999999999" required>
											</div>
											<label for="nisn" class="col-md-2 control-label">NISN *</label>
											<div class="col-md-3">
												<input type="text" name="nisn" id="nisn" maxlength="20" data-ng-minlength="2" class="form-control" placeholder="NISN" data-ng-model="siswa.nisn" masked-input="99?999999999999" required>
											</div>
										</div>
										<div class="form-group" data-ng-class="{ 'has-error': formSiswa.tempat.$invalid && ! formSiswa.tempat.$pristine }">
											<label for="tempat-lahir" class="col-md-3 control-label">Tmp/Tgl Lahir *</label>
											<div class="col-md-3">
												<input type="text" name="tempat" id="tempat-lahir" data-ng-minlength="3" placeholder="Tempat" data-ng-model="siswa.tempat" class="form-control" autosuggest="/api/suggest/tempat" required>
											</div>
											<div class="col-md-1">
												<select name="tanggal" id="tanggal-lahir" class="form-control" data-ng-model="siswa.tanggal">
													{% for c in 1..31 %}
													<option value="{{c}}">{{c}}</option>
													{% endfor %}
												</select>
											</div>
											<div class="col-md-2">
												<select name="bulan" id="bulan-lahir" class="form-control" data-ng-model="siswa.bulan" data-ng-options="n.i as n.s for n in bulan"></select>
											</div>
											<div class="col-md-2">
												<select name="tahun" id="tahun-lahir" class="form-control" data-ng-model="siswa.tahun" style="width:60px;">
													{% for c in (tahun-15)..(tahun-3) %}
													<option value="{{c}}">{{c}}</option>
													{% endfor %}
												</select>
											</div>
										</div>
										<div class="form-group">
											<label for="" class="col-md-3 control-label">Jenis Kelamin *</label>
											<div class="col-md-8">
												<label class="radio-inline">
													<input type="radio" name="jk" id="" value="l" data-ng-model="siswa.jk"> Laki-laki
												</label> &nbsp; 
												<label class="radio-inline">
													<input type="radio" name="jk" id="" value="p" data-ng-model="siswa.jk"> Perempuan
												</label>
											</div>
										</div>
										<div class="form-group">
											<label for="agama" class="col-md-3 control-label">Agama *</label>
											<div class="col-md-3">
												<select name="agama" id="agama" class="form-control" data-ng-model="siswa.agama" required>
													{% for c in agama %}
													<option value="{{c.id}}">{{c.nama}}</option>
													{% endfor %}
												</select>
											</div>
										</div>
										<div class="form-group">
											<label for="tgl-masuk" class="col-md-3 control-label">Tanggal Masuk *</label>
											<div class="col-md-2">
												<input type="text" name="masuk" id="tgl-masuk" data-ng-model="siswa.masuk" class="form-control" placeholder="dd/mm/YYYY" masked-input="99/99/9999" datepicker required>
											</div>
										</div>
										<div class="form-group">
											<label for="pendidikan-sebelumnya" class="col-md-3 control-label">Penddikan Sebelum *</label>
											<div class="col-md-3">
												<select name="pendidikan" id="pendidikan-sebelumnya" class="form-control" data-ng-model="siswa.pendidikan">
													<option value="1">TK</option>
													<option value="0">Home Schooling</option>
												</select>
											</div>
										</div>
										<div class="form-group">
											<label for="telepon" class="col-md-3 control-label">Telepon</label>
											<div class="col-md-3">
												<input type="text" name="telepon" id="telepon" class="form-control" placeholder="" masked-input="+62-99999?999999" data-ng-model="siswa.telepon">
											</div>
											<label for="handphone" class="col-md-2 control-label">Handphone</label>
											<div class="col-md-3">
												<input type="text" name="handphone" id="handphone" class="form-control" placeholder="" masked-input="+62-99999?999999" data-ng-model="siswa.handphone">
											</div>
										</div>
										<div class="form-group" data-ng-class="{ 'has-error': formSiswa.email.$invalid && ! formSiswa.email.$pristine }">
											<label for="email" class="col-md-3 control-label">Email Siswa</label>
											<div class="col-md-3">
												<input type="email" name="email" id="email" maxlength="50" class="form-control" placeholder="email" data-ng-model="siswa.email">
											</div>
										</div>
									</fieldset>
									<fieldset>
										<legend>Alamat Siswa</legend>
										<div class="form-group" data-ng-class="{ 'has-error': formSiswa.alamat.$invalid && ! formSiswa.alamat.$pristine }">
											<label for="alamat" class="col-md-3 control-label">Alamat *</label>
											<div class="col-md-7">
												<input type="text" name="alamat" id="alamat" class="form-control" placeholder="Alamat Siswa" maxlength="80" data-hint="tulis alamat lengkap siswa" data-ng-model="siswa.alamat" data-ng-minlength="8" required>
											</div>
										</div>
										<div class="form-group">
											<label for="rt" class="col-md-3 control-label">RT</label>
											<div class="col-md-2">
												<input type="text" name="rt" id="rt" maxlength="5" class="form-control" placeholder="RT" data-ng-model="siswa.rt" masked-input="9?9999">
											</div>
											<label for="rw" class="col-md-1 control-label">RW</label>
											<div class="col-md-2">
												<input type="text" name="rw" id="rw" maxlength="5" class="form-control" placeholder="RW" data-ng-model="siswa.rw" masked-input="9?9999">
											</div>
										</div>
										<div class="form-group">
											<label for="dusun" class="col-md-3 control-label">Dusun</label>
											<div class="col-md-4">
												<input type="text" name="dusun" id="dusun" maxlength="30" class="form-control" placeholder="Dusun" data-ng-model="siswa.dusun">
											</div>
										</div>
										<div class="form-group" data-ng-class="{ 'has-error': formSiswa.desa.$invalid && ! formSiswa.desa.$pristine }">
											<label for="desa" class="col-md-3 control-label">Desa/Kelurahan *</label>
											<div class="col-md-4">
												<input type="text" name="desa" id="desa" maxlength="30" data-ng-minlength="1" class="form-control" placeholder="Desa" data-ng-model="siswa.desa" autosuggest="/api/suggest/desa" required>
											</div>
										</div>
										<div class="form-group" data-ng-class="{ 'has-error': formSiswa.kecamatan.$invalid && ! formSiswa.kecamatan.$pristine }">
											<label for="kecamatan" class="col-md-3 control-label">Kecamatan *</label>
											<div class="col-md-4">
												<input type="text" name="kecamatan" id="kecamatan" maxlength="30" data-ng-minlength="1" class="form-control" placeholder="Kecamatan" data-ng-model="siswa.kecamatan" autosuggest="/api/suggest/kecamatan" required>
											</div>
											<label for="kdpos" class="col-md-2 control-label">Kodepos</label>
											<div class="col-md-2">
												<input type="text" name="kdpos" id="kdpos" maxlength="8" data-ng-model="siswa.kdpos" number-input class="form-control">
											</div>
										</div>
										<div class="form-group" data-ng-class="{ 'has-error': formSiswa.kabupaten.$invalid && ! formSiswa.kabupaten.$pristine }">
											<label for="kabupaten" class="col-md-3 control-label">Kabupaten/Kota *</label>
											<div class="col-md-5">
												<input type="text" name="kabupaten" id="kabupaten" maxlength="30" data-ng-minlength="1" class="form-control" placeholder="Kabupaten/Kota" data-ng-model="siswa.kabupaten" autosuggest="/api/suggest/kabupaten" required>
											</div>
										</div>
										<div class="form-group" data-ng-class="{ 'has-error': formSiswa.provinsi.$invalid && ! formSiswa.provinsi.$pristine }">
											<label for="kabupaten" class="col-md-3 control-label">Provinsi *</label>
											<div class="col-md-5">
												<input type="text" name="provinsi" id="provinsi" maxlength="30" data-ng-minlength="1" class="form-control" placeholder="Provinsi" data-ng-model="siswa.provinsi" autosuggest="/api/suggest/provinsi" required>
											</div>
										</div>
										<div class="form-group">
											<label for="jenis-tinggal" class="col-md-3 control-label">Jenis Tinggal *</label>
											<div class="col-md-4">
												<select name="jenistinggal" id="jenis-tinggal" class="form-control" data-ng-model="siswa.jenistinggal">
													{% for c in jenistinggal %}
													<option value="{{c.id}}">{{c.nama}}</option>
													{% endfor %}
												</select>
											</div>
										</div>
										<div class="form-group">
											<label for="transport" class="col-md-3 control-label">Alat Transportasi *</label>
											<div class="col-md-4">
												<select name="transport" id="transport" class="form-control" data-ng-model="siswa.transport">
													{% for c in transport %}
													<option value="{{c.id}}">{{c.nama}}</option>
													{% endfor %}
												</select>
											</div>
										</div>
									</fieldset>
									
									{% for c in ['ayah', 'ibu', 'wali'] %}
									<fieldset>
										<legend>Data {{c|capitalize}}{% if c == 'wali' %} <em class="small text-muted">(biarkan kosong bila tidak ada)</em>{% endif %}</legend>
										<input type="hidden" name="{{c}}_id" data-ng-model="{{c}}.id">
										<div class="form-group" data-ng-class="{ 'has-error': formSiswa.{{c}}_nama.$invalid && ! formSiswa.{{c}}_nama.$pristine }">
											<label for="{{c}}nama" class="col-md-3 control-label">Nama{% if c != 'wali' %} *{% endif %}</label>
											<div class="col-md-4">
												<input type="text" name="{{c}}_nama" id="{{c}}nama" maxlength="50" data-ng-minlength="3" class="form-control" placeholder="Nama {{c|capitalize}}" data-ng-model="{{c}}.nama"{% if c != 'wali' %} required{% endif %}>
											</div>
										</div>
										{% if c == 'wali' %}
										<div class="form-group">
											<label for="{{c}}alamat" class="col-md-3 control-label">Alamat</label>
											<div class="col-md-7">
												<input type="text" name="{{c}}_alamat" id="{{c}}alamat" class="form-control" placeholder="Alamat Wali" maxlength="80" data-hint="tulis alamat wali" data-ng-model="wali.alamat">
											</div>
										</div>
										{% endif %}
										<div class="form-group">
											<label for="{{c}}tahun" class="col-md-3 control-label">Tahun Lahir</label>
											<div class="col-md-2">
												<select name="{{c}}_tahun" id="{{c}}tahun" class="form-control" data-ng-model="{{c}}.tahun" style="width:60px;">
													{% for c in (tahun-70)..(tahun-15) %}
													<option value="{{c}}">{{c}}</option>
													{% endfor %}
												</select>
											</div>
											<label for="{{c}}pendidikan" class="col-md-2 control-label">Pendidikan</label>
											<div class="col-md-4">
												<select name="{{c}}_pendidikan" id="{{c}}pendidikan" class="form-control" data-ng-model="{{c}}.pendidikan">
													{% for c in pendidikan %}
													<option value="{{c.id}}">{{c.nama}}</option>
													{% endfor %}
												</select>
											</div>
										</div>
										<div class="form-group">
											<label for="{{c}}pekerjaan" class="col-md-3 control-label">Pekerjaan</label>
											<div class="col-md-3">
												<input type="text" name="{{c}}_pekerjaan" id="{{c}}pekerjaan" maxlength="30" class="form-control" placeholder="Pekerjaan {{c|capitalize}}" data-ng-model="{{c}}.pekerjaan" autosuggest="/api/suggest/kerja{{c}}">
											</div>
											<label for="{{c}}penghasilan" class="col-md-2 control-label">Penghasilan</label>
											<div class="col-md-3">
												<div class="input-group">
													<span class="input-group-addon text-info">Rp.</span>
													<input type="text" name="{{c}}_penghasilan" id="{{c}}penghasilan" maxlength="20" class="form-control" placeholder="" data-ng-model="{{c}}.penghasilan" price-input>
												</div>
											</div>
										</div>
									</fieldset>
									
									{% endfor %}
									
									<fieldset>
										<legend>Selesai dan Simpan</legend>
										<div class="col-md-6 col-md-offset-3">
											<button class="btn btn-primary btn-raised" data-ng-disabled="formSiswa.$invalid"><i class="mdi-action-done"></i>SIMPAN</button> 
											<a href="/siswa" class="btn btn-flat">BATALKAN</a>
										</div>
									</fieldset>
								</form>
							</div>
						</div>
					</div>
					<div class="col-md-3">
						<div class="panel panel-info">
							<div class="panel-heading">
								<h4 class="panel-title"><i class="mdi-action-get-app pull-left" style="margin-top: -2px;"></i> Impor Data Siswa</h4>
							</div>
							<div class="panel-body">
								<p class="text-center text-info" style="font-size: 5rem;"><i class="fa fa-info-circle fa-fw"></i></p>
								<p class="text-info bold small text-center">Data siswa dapat Anda impor dari aplikasi lain seperti DAPODIK <a href=""><i class="fa fa-fw fa-question-circle"></i> How To</a></p>
								<hr>
								<p class="text-center">
									<span class="btn btn-info btn-file">
										<span><i class="fa fa-fw fa-file-o"></i> Pilih Berkas</span>
										<input type="file" name="file" id="file" accept=".csv" simple-file-input>
									</span>
								</p>
							</div>
						</div>
						
						<!--<p class="text-center"><a href="/siswa" class="btn btn-flat">BATALKAN</a></p>
						<div class="alert alert-info">
							Pastikan semua data terisi dengan baik dan benar
						</div>-->
					</div>
				</div>
			</div>
		</div>
		
		{% include 'footer.html' %}
	</div>
	
	{% include 'postpage.html' %}
</body>
</html>